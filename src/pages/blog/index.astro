---
// Foundations
import BaseLayout from "@/layouts/BaseLayout.astro";
import Text from "@/components/fundations/elements/Text.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";

// Components
import BlogEntry from "@/components/blog/BlogEntry.astro";
import Subscribe from "@/components/blog/Subscribe.astro";

// Content
import { getCollection } from "astro:content";

const allPostsUnsorted = await getCollection("posts");

// âœ… Crear allPosts correctamente
const allPosts = allPostsUnsorted.sort(
  (a, b) =>
    new Date(b.data.pubDate).getTime() -
    new Date(a.data.pubDate).getTime()
);

// Tags
const tags = [
  ...new Set(
    allPosts
      .flatMap((post) => post.data.tags ?? [])
      .map((tag) => String(tag))
  ),
];

---

<BaseLayout>
  <section>
    <Wrapper variant="standard" class="pt-48 pb-24">
      <Text
        tag="h1"
        variant="displayXL"
        class="text-accent-950 uppercase font-display font-medium text-balance"
      >
        Ideas, Insights & Internet Experiments for the Web
      </Text>

      <div class="flex items-center mt-12 gap-2">
        <div
          class="relative flex h-full overflow-x-scroll gap-2 lg:gap-4 scrollable-content snap-x snap-proximity scrollbar-hide"
        >
                    {tags.map((tag) => (
            <a
              href={`/blog/tags/${tag}`}
              title={tag}
              aria-label={tag}
              class="px-3 py-1 text-sm rounded-full bg-accent-100 text-accent-900 snap-start"
            >
              {tag}
            </a>
          ))}
        </div>
      </div>
    </Wrapper>
  </section>
</BaseLayout>
